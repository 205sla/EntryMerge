# Product Requirements Document (PRD): ENT File Merge Tool

## 프로젝트 개요

### 목적

ENT 파일 결합 도구는 사용자가 여러 .ent 파일을 손쉽게 결합하고 다시 압축된 .ent 파일로 생성할 수 있도록 설계된 웹 애플리케이션입니다. 이 도구는 간단하고 직관적인 사용자 인터페이스를 제공하며, 엔지니어 및 일반 사용자 모두가 효율적으로 사용할 수 있도록 제작됩니다.

### 주요 목표

- 사용자가 여러 .ent 파일을 업로드하고 결합된 파일을 다시 다운로드할 수 있는 기능 제공.
- UI/UX의 단순화를 통해 최소한의 사용자 학습 곡선 보장.
- MVP(Minimum Viable Product) 개발에 중점.

---

## 유저 플로우

1. **파일 추가**:

   - 사용자는 “파일 추가” 버튼을 클릭하여 여러 .ent 파일을 선택합니다.
   - 선택한 파일 목록이 화면에 표시됩니다.

2. **결합 실행**:

   - “파일 결합” 버튼을 클릭하면 다음이 자동으로 실행됩니다:
     1. 업로드된 .ent 파일의 tar 압축 해제 (memLevel: 6 설정).
     2. 해제된 파일의 내용 결합.
        - **assets 폴더 이름 중복 처리**: 중복된 폴더 이름이 있으면 임의의 2글자로 수정.
        - 이름이 수정된 경우, `project.json` 파일에 반영.
        - **`project.json`의 "scene" 값 중복 처리**: 다른 파일의 값과 겹치지 않도록 임의의 4글자로 수정.
        - 수정된 "scene" 값은 `"scenes"` 배열의 `"id"` 값에도 반영.
        - 동일한 `"scenes"` 배열에서 `"id"` 값이 중복되는 경우에도 동일한 임의의 4글자로 수정.
     3. 결합된 파일을 새로운 .ent 파일로 tar 압축 생성.

3. **파일 다운로드**:

   - 결합된 .ent 파일이 생성되면 사용자는 “다운로드” 버튼을 클릭하여 로컬 장치에 저장할 수 있습니다.

4. **재설정**:

   - 사용자는 “초기화” 버튼을 클릭하여 모든 업로드 파일 및 상태를 초기화할 수 있습니다.

---

## 핵심 기능

1. **파일 업로드**

   - Drag-and-Drop 또는 파일 탐색기를 통해 다중 .ent 파일 업로드.
   - 업로드된 파일의 이름 및 크기 표시.

2. **tar 압축 해제 및 재압축**

   - tar 라이브러리를 활용하여 memLevel 6 설정으로 파일 압축 해제.
   - 결합된 파일을 동일한 방식으로 tar 압축하여 새로운 .ent 파일 생성.

3. **파일 결합 로직**

   - 압축 해제된 파일의 내용을 순차적으로 결합.
   - **assets 폴더 이름 중복 처리**:
     - 중복된 폴더 이름은 임의의 2글자로 수정.
     - 수정된 이름을 `project.json`에 반영.
   - **`project.json`의 "scene" 값 중복 처리**:
     - 값이 겹치지 않도록 임의의 4글자로 수정.
     - 수정된 "scene" 값은 `"scenes"` 배열의 `"id"` 값에도 반영.
     - 동일한 `"scenes"` 배열에서 중복된 `"id"` 값도 수정된 값으로 반영.

4. **결합 파일 다운로드**

   - 결합된 .ent 파일을 사용자에게 다운로드 링크로 제공.

5. **UI 요소**

   - 간단하고 직관적인 UI 구성:
     - 파일 추가 버튼.
     - 결합 실행 버튼.
     - 다운로드 및 초기화 버튼.

---

## 기술스택

1. **프론트엔드**

   - **Next.js (App Router)**: 서버 사이드 렌더링과 클라이언트 사이드 렌더링을 효과적으로 지원.
   - **ShadCN**: 컴포넌트 기반 UI 개발 및 TailwindCSS와의 통합.
   - **TailwindCSS**: 스타일링 및 반응형 디자인.

2. **백엔드**

   - Next.js API Route를 활용하여 파일 처리 로직 구현.

3. **라이브러리**

   - `tar-stream`: tar 파일 압축 해제 및 생성.
   - `fs-extra`: 파일 시스템 작업 간소화.
   - `lodash`: 파일 데이터 결합 및 중복 제거 처리.

4. **배포**

   - Vercel: Next.js 앱의 손쉬운 배포.

---

## MVP 기능 개발 이후 추가 개선사항

1. **파일 결합 옵션 추가**

   - 파일 결합 방식 사용자 정의 (예: 순서, 중복 제거 옵션 등).

2. **다양한 파일 형식 지원**

   - .ent 외 다른 파일 형식 지원 (e.g., .zip, .gz).

3. **사용자 인증**

   - 결합 기록을 저장하기 위한 사용자 계정 시스템 추가.

4. **퍼포먼스 최적화**

   - 대용량 파일 처리 속도 개선.

5. **다국어 지원**

   - 한국어 외 추가 언어 지원.

6. **결합 상태 시각화**

   - 진행 상태 및 결과 데이터를 시각적으로 표시 (e.g., 파일 처리 진행 바).

---

### 결론

이 PRD는 핵심 기능과 기술스택에 집중하여 간단하면서도 효과적인 ENT 파일 결합 도구 개발을 목표로 합니다. MVP 단계에서는 최소 기능에 집중하여 빠르게 사용자 피드백을 받을 수 있는 형태로 릴리즈하며, 이후 개선 사항을 단계적으로 추가해 나갈 계획입니다.

